!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=4)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.updateSize=function(){this.DOM.width=window.innerWidth,this.DOM.height=window.innerHeight},t.DOM=document.getElementById("scene"),t.context=t.DOM.getContext("2d"),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){};e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),n=i(1),r=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e,this.radius=15,this.direction=Math.random()*Math.PI*2,this.state=0,this.speed=3,this.color="rgb(36, 206, 167)",this.colorArr=[36,206,167],this.colors=[[36,206,167],[226,17,142]],this.shiftColor=Math.random()}return t.prototype.draw=function(){o.default.context.beginPath(),o.default.context.strokeStyle=this.color,o.default.context.lineWidth=3,o.default.context.arc(this.x,this.y,this.radius,0,2*Math.PI),o.default.context.stroke()},t.prototype.move=function(t,e){this.x=t,this.y=e},t.prototype.moveByDirection=function(){var t=this.x-this.speed*Math.sin(this.direction),e=this.y-this.speed*Math.cos(this.direction);t>window.innerWidth+this.radius&&(t=-this.radius),t<-this.radius&&(t=window.innerWidth+this.radius),e>window.innerHeight+this.radius&&(e=-this.radius),e<-this.radius&&(e=window.innerHeight+this.radius),this.move(t,e)},t.prototype.updateColor=function(){var t=this;n.default.game.time;this.state=Math.cos(n.default.game.time+this.shiftColor);var e,i=this.colors[0],o=this.colors[1];this.colorArr=[(e=function(e){return t.state*(i[e]-o[e])/2+(i[e]+o[e])/2})(0),e(1),e(2)],this.color="rgb("+this.colorArr[0]+", "+this.colorArr[1]+", "+this.colorArr[2]+")"},t.prototype.update=function(){this.moveByDirection(),this.updateColor()},t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.toDegrees=function(t){return t*(180/Math.PI)},t.getDistance=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.getAngle=function(t,e){var i=this.toDegrees(Math.atan2(t.y-e.y,t.x-e.x));return i<0&&(i+=360),i},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),n=i(1);console.log("I love Tolya soooooo sooooo muuuch!!!! <3"),n.default.game=new o.default,n.default.game.init()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),n=i(0),r=i(7),s=i(8),a=i(11),c=function(){function t(){this.isOver=!1,this.gameOverUI=$(".gameover-popup"),this.scoreUI=$("#score")}return t.prototype.init=function(){var t=this;n.default.updateSize(),this.setActions(),this.restart(),this.render();var e=new Accelerometer({frequency:60});e.addEventListener("reading",(function(i){t.player.direction+=Math.PI/180*e.x*3,t.player.speed=5})),e.start()},t.prototype.play=function(){this.renderer=requestAnimationFrame(this.render.bind(this))},t.prototype.stop=function(){cancelAnimationFrame(this.renderer)},t.prototype.increseScore=function(t){void 0===t&&(t=1),this.score+=t},t.prototype.updateTime=function(){this.time+=.005},t.prototype.setActions=function(){var t=this;$("#restart").click((function(e){t.restart()})),$(window).resize((function(){n.default.updateSize()}))},t.prototype.addBubbles=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);for(var i=0;i<20;i+=1){var o=Math.random()*window.innerWidth,n=Math.random()*window.innerHeight,r=new a.default(o,n);this.scene.add(r),this.backgroundParticles.push(r)}},t.prototype.createEnemy=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=new o.default(t,e);this.scene.add(i),this.balls.push(i)},t.prototype.createPlayer=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=new s.default(t,e);this.player=i,this.scene.add(i),this.players.push(i)},t.prototype.moveAllBubbles=function(){this.backgroundParticles.forEach((function(t){return t.update()}))},t.prototype.moveAllBalls=function(){this.balls.forEach((function(t){return t.update()}))},t.prototype.moveAllPlayers=function(){this.players.forEach((function(t){return t.update()}))},t.prototype.killPlayer=function(t){this.scene.remove(t);var e=this.players.indexOf(t);this.players.splice(e,1),this.gameOver()},t.prototype.gameOver=function(){this.isOver=!0,this.scoreUI.text(this.score),this.gameOverUI.addClass("game-over-active")},t.prototype.restart=function(){this.backgroundParticles=[],this.balls=[],this.players=[],this.time=0,this.scene=new r.default,this.addBubbles(),this.createPlayer(window.innerWidth/2,window.innerHeight/2),this.generateEnemies(),this.isOver=!1,this.gameOverUI.removeClass("game-over-active"),this.score=0},t.prototype.generateEnemies=function(){var t=this;setInterval((function(){if(20!=t.balls.length){var e=Math.random()*window.innerWidth,i=Math.random()*window.innerHeight;t.createEnemy(e,i)}}),2e3)},t.prototype.render=function(){this.renderer=requestAnimationFrame(this.render.bind(this)),this.updateTime(),n.default.context.globalAlpha=.5,n.default.context.fillStyle="#000000",n.default.context.fillRect(0,0,window.innerWidth,window.innerHeight),this.moveAllBalls(),this.moveAllPlayers(),this.moveAllBubbles(),this.scene.draw()},t}();e.default=c},function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),s=i(3),a=i(0),c=i(1),u=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.updateRadiusStep=.5,o.collisions=[],o.lines=[],o.isDead=!1,o}return n(e,t),e.prototype.checkCollision=function(t){var e=s.default.getDistance(this,t);return t!=this&&e<this.radius+t.radius&&-1==this.collisions.indexOf(t)},e.prototype.onCollision=function(){var t=this;c.default.game.balls.forEach((function(e){t.checkCollision(e)&&(e.collisions.push(t),e.direction=t.direction,e.moveByDirection(),t.direction+=Math.PI,t.moveByDirection());var i=s.default.getDistance(t,e);if(e!=t&&i<400&&-1==t.lines.indexOf(e)){e.lines.push(t),a.default.context.beginPath();var o=a.default.context.createLinearGradient(t.x,t.y,e.x,e.y);o.addColorStop(0,"rgba(202, 10, 241, "+(1-i/400)+")"),o.addColorStop(1,"rgba(241, 10, 99, "+(1-i/400)+")"),a.default.context.strokeStyle=o,a.default.context.lineWidth=2,a.default.context.moveTo(t.x,t.y),a.default.context.lineTo(e.x,e.y),a.default.context.stroke()}})),this.collisions=[],this.lines=[]},e.prototype.getPointPositionByAngle=function(t){var e=s.default.getAngle(t,this);this.x,this.radius,Math.sin(e),this.y,this.radius,Math.cos(e)},e.prototype.die=function(){this.isDead=!0,c.default.game.scene.remove(this);var t=c.default.game.balls.indexOf(this);c.default.game.balls.splice(t,1)},e.prototype.changeRadius=function(){this.radius+=this.updateRadiusStep,(this.radius>30||this.radius<5)&&(this.updateRadiusStep=-this.updateRadiusStep)},e.prototype.update=function(){t.prototype.update.call(this),this.updateColor(),0==this.isDead&&(this.changeRadius(),this.onCollision())},e}(r.default);e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.children=[]}return t.prototype.draw=function(){this.children.forEach((function(t){return t.draw()}))},t.prototype.add=function(t){this.children.push(t)},t.prototype.remove=function(t){var e=this.children.indexOf(t);this.children.splice(e,1)},t}();e.default=o},function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),s=i(0),a=i(1),c=i(3),u=i(9),l=i(10),h=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.keys={left:{action:function(){return o.direction+=Math.PI/180*3},active:!1},right:{action:function(){return o.direction-=Math.PI/180*3},active:!1},top:{action:function(){o.speed<10&&(o.speed+=.1)},active:!1},bottom:{action:function(){o.speed>0&&(o.speed-=.05)},active:!1}},o.radius=20,o.direction=0,o.speed=0,o.meteors=[],o.rectangles=[],o.leftSideColor="#51c7f9",o.rightSideColor="#3eaaf8",o.triangles={left:[{x:0,y:-20},{x:0,y:15},{x:-15,y:20}],right:[{x:0,y:-20},{x:0,y:15},{x:15,y:20}]},o.init(),o}return n(e,t),e.prototype.init=function(){this.setPlayerActions(),this.dropRectangles()},e.prototype.setPlayerActions=function(){var t=this;$(window).keydown((function(e){switch(e.which){case 38:t.keys.top.active=!0;break;case 40:t.keys.bottom.active=!0;break;case 37:t.keys.left.active=!0;break;case 39:t.keys.right.active=!0}})),$(window).keyup((function(e){switch(e.which){case 38:t.keys.top.active=!1;break;case 40:t.keys.bottom.active=!1;break;case 37:t.keys.left.active=!1;break;case 39:t.keys.right.active=!1}}))},e.prototype.updateControls=function(){Object.values(this.keys).forEach((function(t){t.active&&t.action()}))},e.prototype.draw=function(){this.drawRectangles(),this.drawMeteors(),s.default.context.shadowBlur=20,this.drawTriangle(this.leftSideColor,this.triangles.left),this.drawTriangle(this.rightSideColor,this.triangles.right),s.default.context.shadowColor=this.leftSideColor,s.default.context.shadowBlur=0},e.prototype.drawMeteors=function(){this.meteors.forEach((function(t){t.update()}))},e.prototype.drawRectangles=function(){var t=this;this.rectangles.forEach((function(e,i){e.update(),e.alpha<=0&&t.rectangles.splice(i,1)}))},e.prototype.drawTriangle=function(t,e){var i=this;s.default.context.beginPath(),s.default.context.fillStyle=t,this.rotatedTriangle(e).forEach((function(t,e){0==e?s.default.context.moveTo(t.x+i.x,t.y+i.y):s.default.context.lineTo(t.x+i.x,t.y+i.y)})),s.default.context.fill()},e.prototype.rotatedTriangle=function(t){var e=this;return t.map((function(t){return{x:t.x*Math.cos(e.direction)+t.y*Math.sin(e.direction),y:t.y*Math.cos(e.direction)-t.x*Math.sin(e.direction)}}))},e.prototype.update=function(){this.updateControls(),this.moveByDirection(),this.updateColor(),this.onCollision()},e.prototype.createMeteor=function(){var t=new u.default(this);this.meteors.push(t)},e.prototype.createRectangle=function(t,e,i,o){var n=new l.default(t,e,i,o);this.rectangles.push(n)},e.prototype.dropRectangles=function(){var t=this;this.dropRectanglesAnim=setInterval((function(){t.createRectangle(t.x,t.y,t.direction)}),50)},e.prototype.checkCollision=function(t){var e=c.default.getDistance(this,t);return t!=this&&e<this.radius+t.radius},e.prototype.onCollision=function(){var t=this;a.default.game.balls.forEach((function(e){t.checkCollision(e)&&0==e.isDead&&(e.state<-0?t.meteors.length?(t.meteors.splice(0,1),t.eatBall(e)):(a.default.game.killPlayer(t),t.die()):(t.eatBall(e),t.createMeteor()))}))},e.prototype.die=function(){for(var t=0,e=0;e<180;e++)this.createRectangle(this.x,this.y,t),t+=2*Math.PI/180;clearInterval(this.dropRectanglesAnim)},e.prototype.eatBall=function(t){a.default.game.increseScore();for(var e=0,i=0;i<30;i++)this.createRectangle(t.x,t.y,e,t.colorArr),e+=2*Math.PI/30;t.die()},e}(r.default);e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),n=function(){function t(t){this.x=t.x,this.y=t.y,this.speed=Math.random()*Math.PI/20+Math.PI/180,this.radius=3,this.color="white",this.parent=t,this.angle=0,this.updateRadiusStep=1}return t.prototype.draw=function(){o.default.context.beginPath(),o.default.context.fillStyle=this.color,o.default.context.arc(this.x,this.y,this.radius,0,2*Math.PI),o.default.context.fill()},t.prototype.getPosition=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=this.parent.x+t,o=this.parent.y+this.parent.radius+e,n=this.parent.x,r=this.parent.y,s=i-n,a=o-r,c=Math.cos(this.angle),u=Math.sin(this.angle);this.x=n+s*c-a*u,this.y=r+s*u+a*c},t.prototype.update=function(){this.angle+=this.speed,this.getPosition(0,10),this.draw()},t}();e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),n=function(){function t(t,e,i,o){this.x=t,this.y=e,this.alpha=1,this.color="rgba(248, 4, 106, "+this.alpha+")",this.colorArr=o||[248,4,106],this.direction=-i+Math.random()*Math.PI-Math.PI/2,this.speed=1}return t.prototype.draw=function(){o.default.context.beginPath(),o.default.context.fillStyle=this.color,o.default.context.rect(this.x,this.y,6,6),o.default.context.fill()},t.prototype.update=function(){this.updateColor(),this.moveByDirection(),this.draw()},t.prototype.updateColor=function(){this.alpha-=.008,this.color="rgba("+this.colorArr[0]+", "+this.colorArr[1]+", "+this.colorArr[2]+", "+this.alpha+")"},t.prototype.move=function(t,e){this.x=t,this.y=e},t.prototype.moveByDirection=function(){var t=this.x-this.speed*Math.sin(this.direction),e=this.y-this.speed*Math.cos(this.direction);this.move(t,e)},t}();e.default=n},function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),s=i(1),a=i(3),c=i(0),u=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=t.call(this,e,i)||this;return o.radius=3,o.colors=[[128,48,231,.3],[17,3,36,.3]],o.collisions=[],o.lines=[],o.speed=.5,o}return n(e,t),e.prototype.draw=function(){c.default.context.beginPath(),c.default.context.fillStyle=this.color,c.default.context.lineWidth=3,c.default.context.arc(this.x,this.y,this.radius,0,2*Math.PI),c.default.context.fill()},e.prototype.updateColor=function(){var t,e=this,i=s.default.game.time,o=this.colors[0],n=this.colors[1];this.color="rgb("+(t=function(t){return Math.cos(i+e.shiftColor)*(o[t]-n[t])/2+(o[t]+n[t])/2})(0)+", "+t(1)+", "+t(2)+", "+t(3)+")"},e.prototype.checkCollision=function(t){var e=a.default.getDistance(this,t);return t!=this&&e<this.radius+t.radius&&-1==this.collisions.indexOf(t)},e.prototype.onCollision=function(){var t=this;s.default.game.backgroundParticles.forEach((function(e){t.checkCollision(e)&&(e.collisions.push(t),e.direction=t.direction,e.moveByDirection(),t.direction+=Math.PI,t.moveByDirection());var i=a.default.getDistance(t,e);if(e!=t&&i<30&&-1==t.lines.indexOf(e)){e.lines.push(t),c.default.context.beginPath();var o=c.default.context.createLinearGradient(t.x,t.y,e.x,e.y);o.addColorStop(0,"rgba(128, 0, 128, "+(1-i/30)+")"),o.addColorStop(1,"rgba(255, 192, 203, "+(1-i/30)+")"),c.default.context.strokeStyle=o,c.default.context.lineWidth=2,c.default.context.moveTo(t.x,t.y),c.default.context.lineTo(e.x,e.y),c.default.context.stroke()}})),this.lines=[],this.collisions=[]},e.prototype.update=function(){this.moveByDirection(),this.updateColor(),this.onCollision()},e}(r.default);e.default=u}]);